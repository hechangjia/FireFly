import{p as c,o as ue,a as fe,s as T,b as B,c as b}from"./props.DA3cnlGR.js";import{d as me,s as D,p as pe,f as h,t as w,e as j,a as u,b as he,c as _e,g as p,h as e,i as q,j as F,r as H,k as ge,l as z}from"./utils.BziIiAuT.js";import{i as C}from"./if.06m7hHQQ.js";import{e as A,i as J}from"./each.DkHc5F7J.js";import{b as ye}from"./this.BxztNg5r.js";/* empty css                        */import"./branches.B8F0c7aw.js";var be=h('<img class="carousel-media svelte-xm949r"/>'),we=h('<video class="carousel-media svelte-xm949r" playsinline=""><track kind="captions"/></video>',2),ke=h("<div><!></div>"),xe=h('<button class="carousel-control prev svelte-xm949r" aria-label="Previous slide"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg></button> <button class="carousel-control next svelte-xm949r" aria-label="Next slide"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg></button>',1),Ie=h("<button></button>"),Ve=h('<div class="carousel-indicators svelte-xm949r"></div>'),je=h("<div><!> <!> <!></div>");function De(K,n){_e(n,!0);let Q=c(n,"interval",3,5e3),R=c(n,"transition",3,1e3),L=c(n,"pauseOnHover",3,!1),U=c(n,"showIndicators",3,!0),W=c(n,"showControls",3,!1),X=c(n,"effect",3,"fade"),Y=c(n,"randomOrder",3,!1),N=c(n,"position",3,"center"),y=c(n,"videoSettings",19,()=>({muted:!0,loop:!1,objectFit:"cover"})),Z=c(n,"class",3,""),a=D(0),M=D(!1),k=null,s=D(pe([])),l=[];ue(()=>{Y()?p(s,[...n.items].sort(()=>Math.random()-.5),!0):p(s,[...n.items],!0),x()}),fe(()=>{I(),l.forEach(t=>{t&&(t.pause(),t.src="")})});function x(){e(s).length<=1||e(s)[e(a)]?.type==="video"&&!y().loop||(k=setInterval(()=>{e(M)||S()},Q()))}function I(){k&&(clearInterval(k),k=null)}function S(){const t=l[e(a)];if(t&&t.pause(),p(a,(e(a)+1)%e(s).length),I(),x(),e(s)[e(a)]?.type==="video"){const o=l[e(a)];o&&(o.currentTime=0,o.play().catch(r=>console.warn("Video play failed:",r)))}}function $(){const t=l[e(a)];if(t&&t.pause(),p(a,(e(a)-1+e(s).length)%e(s).length),I(),x(),e(s)[e(a)]?.type==="video"){const o=l[e(a)];o&&(o.currentTime=0,o.play().catch(r=>console.warn("Video play failed:",r)))}}function ee(t){const i=l[e(a)];if(i&&i.pause(),p(a,t,!0),I(),x(),e(s)[e(a)]?.type==="video"){const r=l[e(a)];r&&(r.currentTime=0,r.play().catch(d=>console.warn("Video play failed:",d)))}}function te(){L()&&p(M,!0)}function oe(){L()&&p(M,!1)}function ae(t){t===e(a)&&!y().loop&&S()}function ie(t){if(t===e(a)){const i=l[t];i&&i.play().catch(o=>console.warn("Video autoplay failed:",o))}}var _=je(),P=q(_);A(P,17,()=>e(s),J,(t,i,o)=>{var r=ke();let d;var f=q(r);{var V=g=>{var m=be();b(m,"alt",`Background ${o+1}`),w(()=>{b(m,"src",e(i).src),B(m,`object-position: ${N()??""}; object-fit: cover;`)}),u(g,m)},le=g=>{var m=ge(),ce=z(m);{var de=E=>{var v=we();ye(v,(O,ve)=>l[ve]=O,O=>l?.[O],()=>[o]),w(()=>{b(v,"src",e(i).src),B(v,`object-fit: ${y().objectFit??""}; object-position: ${N()??""};`),v.muted=y().muted??!0,v.loop=y().loop??!1}),j("ended",v,()=>ae(o)),j("loadeddata",v,()=>ie(o)),u(E,v)};C(ce,E=>{e(i).type==="video"&&E(de)},!0)}u(g,m)};C(f,g=>{e(i).type==="image"?g(V):g(le,!1)})}H(r),w(()=>{d=T(r,1,`carousel-slide ${X()??""}-effect`,"svelte-xm949r",d,{active:o===e(a)}),B(r,`transition-duration: ${R()??""}ms;`)}),u(t,r)});var G=F(P,2);{var re=t=>{var i=xe(),o=z(i);o.__click=$;var r=F(o,2);r.__click=S,u(t,i)};C(G,t=>{W()&&e(s).length>1&&t(re)})}var se=F(G,2);{var ne=t=>{var i=Ve();A(i,21,()=>e(s),J,(o,r,d)=>{var f=Ie();let V;f.__click=()=>ee(d),w(()=>{V=T(f,1,"indicator svelte-xm949r",null,V,{active:d===e(a),"video-indicator":e(r).type==="video"}),b(f,"aria-label",`Go to ${e(r).type??""} ${d+1}`),b(f,"title",e(r).type==="video"?"Video":"Image")}),u(o,f)}),H(i),u(t,i)};C(se,t=>{U()&&e(s).length>1&&t(ne)})}H(_),w(()=>T(_,1,`media-carousel-container ${Z()??""}`,"svelte-xm949r")),j("mouseenter",_,te),j("mouseleave",_,oe),u(K,_),he()}me(["click"]);export{De as default};
